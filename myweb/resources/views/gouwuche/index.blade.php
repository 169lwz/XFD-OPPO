<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<html class='no-js'>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html;charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=EDGE" />
    <meta content='width=device-width,initial-scale=1, user-scalable=no' name='viewport'>
    <title>购物车-OPPO智能手机官网 </title>
    <style type="text/css">
      #yd{
        position:absolute;
        margin-left:-230px;
      }
    </style>
    <meta name="keywords" content="购物车,OPPO智能手机官网 " />
    <meta name="description" content="OPPO手机购物车为您提供OPPO手机购物车流程,想知道更多的购物车信息，就在OPPO智能手机官网。 " />
    <link media="all" type="text/css" rel="stylesheet" href="/gouwuche/css/styles.css?v=20161221100627">
    <script type="text/javascript">
		function checkBrowser(){
			var browser = {};
			var div = document.createElement( "div" );
			div.innerHTML = "<link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
            var a = div.getElementsByTagName( "a" )[0];
			style = a && a.style;
			if (!style) {
				return;
			}
			style.cssText = "float:left;opacity:.5";
			// Support: IE<9
			// Make sure that element opacity exists (as opposed to filter)
			browser.opacity = style.opacity === "0.5";
			// Verify style float existence
			// (IE uses styleFloat instead of cssFloat)
			browser.cssFloat = !!style.cssFloat;
			if(browser.opacity && browser.cssFloat){
				return true;
			}else{
                //IE 8测试
                var userAgent = navigator.userAgent.toLocaleUpperCase();
                var msie = /MSIE [\d\.]+/;
                var version = msie.exec(userAgent);
                if (version<"MSIE 8") return false;
                else return true;
			}
		}
        var v = checkBrowser();
		if (!v) {
			window.location.href = "http://www.opposhop.cn/lower.html";
		}
    </script>
    <!--[if lt IE 9]>
      <link media="all" type="text/css" rel="stylesheet" href="http://www.opposhop.cn/assets/stylesheets/styles.css?v=20161221100627">
      <script src="http://shopfs.myoppo.com/shop/lib/html5shiv.js"></script>
      <script src="http://shopfs.myoppo.com/shop/lib/respond.min.js"></script>
      <script src="http://shopfs.myoppo.com/shop/lib/selectivizr-min.js"></script>
      <link media="all" type="text/css" rel="stylesheet" href="http://shopfs.myoppo.com/shop/assets/stylesheets/ie.css?v=20161221100627">
    <![endif]-->
    <script src="/gouwuche/js/modernizr.custom.js"></script>
          </head>
  <body>
  <header class='main-header'>
  <div class='upper-area'>
    <div class='wrapper g'>
                  <ul class='gi log-area'>
    <li class='gi hidden hasLogin' data-desktop='.upper-area .log-area' data-mobile='.mobile-tools .log-area'>
      <a href='http://www.opposhop.cn/orders'>
        <span class='text'>我的OPPO</span>
        <span class='icon icon-messages'></span>
        <span class='n-messages'>(0)</span>
      </a>
    </li>
    <li class='gi hidden hasLogin' data-desktop='.upper-area .log-area' data-mobile='.mobile-tools .log-area'>
      <a class='logout' href='https://id.oppo.com/logout?callback=http%3A%2F%2Fwww.opposhop.cn%2Fcart'>退出</a>
    </li>
    <li class='gi hasLogout' data-desktop='.upper-area .log-area' data-mobile='.mobile-tools .log-area'>
      <a href='https://id.oppo.com/login?callback=http%3A%2F%2Fwww.opposhop.cn%2Fcart'>
        登录
      </a>
    </li>
    <li class='gi hasLogout' data-desktop='.upper-area .log-area' data-mobile='.mobile-tools .log-area'>
      <a href='https://id.oppo.com/register/sms?type=1&callback=http%3A%2F%2Fwww.opposhop.cn%2Fcart'>
        注册
      </a>
    </li>
    </ul>      <ul class='gi menu-lang'>
  <li class='gi gi-language' data-desktop='.menu-lang' data-mobile='.main-menu nav .nav-ul-view > ul'>
    <a class='lang-link js-toggle-close' href='#'>Global</a>
    <div class='languages js-content' data-desktop='.gi-language' data-mobile='.languages-panel'>
      <div class='wrapper'>
        <h3 class='h-epsilon'>Select your country or region</h3>
        <ul>
          <li>
          <a  href='http://www.oppo.com/dz/'>Algérie</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/au/'>Australia</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/bd/'>Bangladesh</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/eg/'>Egypt</a>
          </li>
          <li>
          <a href='http://www.oppo.com/en/'>Global</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/in/'>India</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/id/'>Indonesia</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/ke/'>Kenya</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/my/'>Malaysia</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/ma/'>Maroc</a>
          </li>
          <!-- <li>
          <a  href='http://www.oppo.com/mx/'>México</a>
          </li> -->
          <!-- <li>
          <a  href='http://www.oppo.com/ng/'>Nigeria</a>
          </li> -->
          <li>
          <a  href='http://www.oppo.com/pk/'>Pakistan</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/ph/'>Philippines</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/sg/'>Singapore</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/lk/'>Sri Lanka</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/tw/'>台灣</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/ae/'>UAE</a>
          </li>
          <li>
          <a  href='http://www.oppomobile.vn/'>Việt Nam</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/th/'>ประเทศไทย</a>
          </li>
          <li>
          <a  href='http://www.oppo.com/mm/'>Myanmar</a>
          </li>
          <li>
          <a  class='current'  href='http://www.oppo.com/cn/'>中国</a>
          </li>
        </ul>
      </div>
    </div>
  </li>
</ul>    </div>
  </div>
  <div class='bottom-area'>
    <div class='wrapper'>
      <a class='js-open-menu' href='#'>
        <i class='js-open-menu-bar'></i>
      </a>
      <div class='shop-cart'>
  <a href='#'>
        <span class='icon icon-cart'></span>
    <span class='n-item-cart cart_number' id="shopping-count"></span>
  </a>
</div>      <div class='logo logo-extend'>
        <a href='http://www.oppo.com/cn/'>
          <img src="/gouwuche/images/logo.png" alt="">
        </a>
      </div>
      <a class='js-open-user' href='#'>
        <img src="/gouwuche/images/icon-menu-user.png" alt="">
      </a>
      <div class='main-menu'>
        <!-- <div class='mobile-tools'>
          <a class='js-close-menu' href='#'>
            <img alt='' src='/cn/media/images/icon-menu-close.png' />
          </a>
          <ul class='g log-area'></ul>
        </div> -->
        <div class='search'></div>
        <nav>
  <div class='nav-ul-view'>
  <ul class='menu g'>
    <li class='gi
    '>
      <a class='m-item' href='http://www.oppo.com/cn/'>
        <span>首页</span>
      </a>
    </li>
    <li class='gi'>
      <a class='m-item' href='http://www.oppo.com/cn/products.html'>
        <span>产品</span>
      </a>
    </li>
                                <li class='gi
        is-active
        '>
      <a class='m-item' id='storeLink' href='http://www.opposhop.cn' data-hd-url='http://hd.oppo.com/act/2016/1001/index.html'>
        <span>商城</span>
              </a>
          </li>
    <li class='gi'>
      <a class='m-item' href='http://www.oppo.com/cn/shops'>
        体验店
      </a>
    </li>
    <li class='gi'>
      <a class='m-item' href='http://www.oppo.com/cn/service.html'>
        服务
              </a>
    </li>
          <li class='gi'>
      <a class='m-item' href='http://www.coloros.com/' target="_blank">
        ColorOS
      </a>
    </li>
    <li class='gi'>
      <a class='m-item' href='http://www.oppo.cn/' target="_blank">
        社区
      </a>
    </li>
  </ul>
  </div>
</nav>
      </div>
      <div class='user-menu'>
<div class='relative'>
  <ul>
    <li class='user-menu-login'>
      <a href="http://www.opposhop.cn/orders">我的订单</a>
    </li>
    <li class='user-menu-login'>
      <a href="https://id.oppo.com/account/profile">账户信息</a>
    </li>
    <li class='user-menu-login'>
      <a href="http://www.opposhop.cn/user/addresses">配送地址</a>
    </li>
    <li class='user-menu-login user-menu-cart'>
      <a href="http://www.opposhop.cn/cart">购物车</a>
    </li>
    <li class='user-menu-login user-menu-toLogin'>
      <a href='https://id.oppo.com/login?callback=http%3A%2F%2Fwww.opposhop.cn%2Fcart'>
        登录
      </a>
    </li>
    <li class='user-menu-logout'>
      <a href='https://id.oppo.com/logout?callback=http%3A%2F%2Fwww.opposhop.cn%2Fcart'>退出</a>
    </li>
  </ul>
</div>
</div>    </div>
  </div>
  <div class='nav-sub-menu'>
  <div class='relative'></div>
</div>
<div class='nav-search-mask'></div>
<div class='nav-search'>
  <div class='nav-search-container'>
    <div class='nav-search-content'>
      <div class='nav-search-input'>
        <form action='http://www.opposhop.cn/products' class='main-form'>
          <input placeholder='搜索OPPO商品' type='text' name="q">
          <button class='button' type='submit'>搜索</button>
          <a href='#' class='nav-search-close'>取消</a>
        </form>
      </div>
    </div>
  </div>
</div>  <div class="languages-panel"></div>
</header>
        <main class='main-content slab-light'>
      <div class='wrapper'>
        <ul class='breadcrumb'>
  <li>
    <a href='http://www.oppo.com/cn/'>
      首页
      <span>/</span>
    </a>
  </li>
            <li>
                  购物车
              </li>
      </ul>
        <div class='brick-bottom'>
          <ul class='steps'><li class='one active step-completed'>
    <div class='step-content'>
            <h5 class='step-heading'>购物车</h5>
      <div class='step-gradient'></div>
    </div>
  </li><li class='two  '>
    <div class='step-content palm-right-text'>
            <h5 class='step-heading'>填写订单</h5>
      <div class='step-gradient'></div>
    </div>
  </li><li class='three '>
    <div class='step-content'>
            <h5 class='step-heading'>支付</h5>
      <div class='step-gradient'></div>
    </div>
  </li></ul>
          <div class="row">
            <div class="col-md-12">
            <div class="alert alert-danger" role="alert">
              <ul class="list-unstyled">
                <strong class='error_msg_note'>
                </strong>
              </ul>
            </div>
            </div>
          </div>
          

  <form class='g'>
    <div class='gi one-whole slab-white-border cart-reversion'>
      <ul class='purchase-list-header'>
        <li class='first'>
          <label class="check-box-label check-box-all is-checked" for='checkAll'>
            <input type="checkbox" id="quanxuan1" name="like[]">
            <!-- <span class="icon icon-checkbox"></span> -->
            <span class="space-ml-10">全选</span>
          </label>
        </li>
        <li class='second'>产品</li>
        <li class='third'>数量</li>
        <li class='four'>单价</li>
        <li class='five'>操作</li>
      </ul>
      <div class="brick-shadow purchase-list">
@foreach($list as $v)
    <div info="kong1" class="cart-product cart-product-l cart-product-b5c161c6639cbf6eb3a51469ece3aa05 ">
          <div class="cart-product-choice">
            <label data-id="b5c161c6639cbf6eb3a51469ece3aa05" class="check-box-label check-box-item is-checked">
              <input type="checkbox" class="quanxuan1" name="like[]" info="1">
              <!-- <span class="icon icon-checkbox"></span> -->
            </label>
            <a target="_blank" href="http://www.opposhop.cn/products/397" class="cart-product-image">
              <img src="/image/{{$v['sf']}}">
            </a>
          </div>
          <div class="cart-product-info">
            <div class="cart-product-description">
              <h3 class="heading">{{$v['goods']}}</h3>
              <p>{{$v['company']}}</p>
            </div>
            <div class="cart-counter-box">
              <input type="hidden" name="id" value="{{$v['id']}}">

              <div class="counter-box">
                  <a data-id="b5c161c6639cbf6eb3a51469ece3aa05" id="jian" class="btn minus">-</a>
                  <input type="text" data-price="1599.00" data-quantity="1" value="{{$v['num']}}" readonly="" class="number cart-product-quantity-b5c161c6639cbf6eb3a51469ece3aa05">
                  <a data-id="b5c161c6639cbf6eb3a51469ece3aa05" id="jia" class="btn plus">+</a>
              </div>
            </div>
            <div class="cart-product-price">
              <span class="normal">{{$v['price']}}元</span>
            </div>
            
            <div data-id="b5c161c6639cbf6eb3a51469ece3aa05" id="del" class="cart-product-delete cart-product-delete-word">删除</div>
            <span data-id="b5c161c6639cbf6eb3a51469ece3aa05" class="cart-product-delete cart-product-delete-icon icon icon-close-circle"></span>
    </div>
    </div>
@endforeach
<div class="cart-fee">
  <ul>
    <li>
      <span class="cart-fee-title">商品数量:</span>
      <span id="count">0</span>
    </li>
    <li>
      <span class="cart-fee-title">总计:</span>
      <span id="price">￥0</span>
    </li>
    <li class="cart-alipay-hb">
      <span class="cart-fee-title"><i class="icon-hb"></i>订单满600可使用花呗分期3/6/12期</span>
    </li>
  </ul>
    </div>
    </div>

    <div id="kong" class='brick-shadow purchase-list' style="display:none">
      <center><h2>购物车空空的，去<a href='/' style='color:#1f8657;'>逛逛</a>吧</h2></center>
    </div>
    <div class="form-actions brick-shadow">
      <div class="form-actions-left">
        <a target="_blank" href="http://www.opposhop.cn" class="link-primary">继续购买&gt;&gt;</a>
      </div>

      <div class="form-actions-right">
        <a id="yd" class="button cart-button" href="">清空购物车</a>
        <a id="shipping_btn" class="button cart-button" href="javascript:;">结算</a>
      </div>
    </div>
  </div>
  </form>

        </div>
        <div class='cart-btn-check'>
          <a class='button cart-button oppo-tj' id='shipping_btn_m' href='/gouwuche/javascript:;' data-tj='store|btn|check|sticky' >结算</a>
        </div>
              </div>
    </main>
	    <div id='dialog-error-msg' class='hidden'>
			<div class="mask-common"></div>
			<div class="dialog-common dialog-box-common">
				<div class="dialog-container">
					<a class="dialog-close-common">×</a>
					<div class="dialog-content-common">
												<div class="field">
							<h4 class='dialog-title-common'>.</h4>
						</div>
																		<div class="dialog-common-content">
												</div>
																		<div class="field dialog-btn">
							<div class="g g-wrapper-s">
								<div class="gi lap-one-whole">
									<a class='button button-one-whole'>确定</a>
								</div>
							</div>
						</div>
											</div>
				</div>
			</div>
		</div>
<footer class='main-footer'>
    <div class='footer-sitemap'>
    <nav class='wrapper'>
  <div class="g">
    <div class="gi lap-three-quarters">
<ul class='g'>
  <li class='gi lap-one-quarter'>
  <a class='m-item' href='http://www.oppo.com/cn/products' target="_blank">推荐机型</a>
  <span class="toggle js-toggle-sitemap"></span>
  <ul>
  <li>
    <a href='http://www.opposhop.cn/products/390.html' target='_blank'>R9s</a>
  </li>
  <li>
    <a href='http://www.opposhop.cn/products/401.html' target='_blank'>R9s Plus</a>
  </li>
  <li>
    <a href='http://www.opposhop.cn/products/389.html' target='_blank'>A59s</a>
  </li>
  <li>
    <a href='http://www.opposhop.cn/products/397.html' target='_blank'>A57</a>
  </li>
  </ul>
  </li>
  <li class='gi lap-one-quarter'>
    <a class='m-item' href='http://www.opposhop.cn/' target="_blank">在线购买</a>
  <span class="toggle js-toggle-sitemap"></span>
  <ul>
  <li>
    <a href='http://www.opposhop.cn/products?is_promotion=0&category=1' target='_blank'>手机</a>
  </li>
  <li>
    <a href='http://www.opposhop.cn/products?is_promotion=0&category=2' target='_blank'>配件</a>
  </li>
  <li>
    <a href='http://www.oppo.com/cn/service/help?name=购买帮助' target='_blank'>购物指南</a>
  </li>
  <li>
    <a href='http://www.oppo.com/cn/service/help/614?name=打假维权' target='_blank'>官方授权网店</a>
  </li>
  </ul>
  </li>
  <li class='gi lap-one-quarter'>
    <a class='m-item' href='http://www.oppo.com/cn/service' target="_blank">服务</a>
  <span class="toggle js-toggle-sitemap"></span>
  <ul>
  <li>
    <a href='http://www.oppo.com/cn/service/map' target='_blank'>服务网点查询</a>
  </li>
  <li>
    <a href='http://www.oppo.com/cn/service/part' target='_blank'>零配件价格查询</a>
  </li>
  <li>
    <a href='http://yun.oppo.com/' target='_blank'>云服务</a>
  </li>
  <li>
    <a href='http://www.oppo.com/cn/about' target='_blank'>建议反馈</a>
  </li>
  </ul>
  </li>
  <li class='gi lap-one-quarter'>
    <a class='m-item' href='http://www.oppo.com/cn/blogs' target="_blank">关于我们</a>
  <span class="toggle js-toggle-sitemap"></span>
  <ul>
  <li>
    <a href='http://www.oppo.com/cn/blogs/about' target='_blank'>关于OPPO</a>
  </li>
  <li>
    <a href='http://career.oppo.com' target='_blank'>加入我们</a>
  </li>
  <li>
    <a href='http://www.oppo.com/cn/service/help/605?name=sourcing' target='_blank'>采购相关</a>
  </li>
  <li>
    <a href='http://hd.oppo.com/2016/r9s/conference/index.html' target='_blank'>发布会回顾</a>
  </li>
  </ul>
  </li>
</ul>
    </div>
    <div class="gi lap-one-quarter align-right">
      <div class="one-half lap-one-whole contact-online">
        <a href="http://oim.oppo.com/oim/chatClient/chatbox.jsp?companyID=8092&configID=890&enterurl=http%3A%2F%2Foim%2Emyoppo%2Ecom%2Foim%2Fpreview%2Ejsp&pagereferrer=http%3A%2F%2Foim%2Emyoppo%2Ecom%2Foim%2FembedScript%2Ejsp%3Ft%3D1517&k=1" target="_blank"><img src="/gouwuche/images/icon-online.png" alt=""></a>
      </div>
      <div class="one-half lap-one-whole contact-tel">
        <p class="contact-number">4001-666-888</p>
        <p class="contact-tips">（24小时全国服务热线）</p>
      </div>
    </div>
  </div>
</nav>  </div>
  <div class="g wrapper">
    <div class="footer-linear"></div>
  </div>
    <div class='footer-info'>
    <div class='wrapper'>
            <div class="footer-focus">
        <span class='text'>关注我们：</span>
        <a href='http://weibo.com/oppo' target='_blank' class="footer-focus-weibo">
          <span class='icon icon-weibo'></span>
        </a>
        <a href='#' class='footer-focus-icon footer-focus-wechat relative'>
          <span class='icon icon-wechat'></span>
          <img src="/gouwuche/images/qrcode-wx.jpg" class="wx-float" alt="">
        </a>
        <a href='#' class='footer-focus-icon footer-focus-fuwuchuang relative'>
          <span class='icon icon-fuwuchuang'></span>
          <img src="/gouwuche/images/qrcode-fwc.jpg" class="wx-float" alt="">
        </a>
      </div>
      <p class='copy'>© 2005 - 2017 东莞市永盛通信科技有限公司 版权所有 粤ICP备14056724号-2 联系方式：4001-666-888</p>
      <a href="http://wljg.gdgs.gov.cn/corpsrch.aspx?key=441900000436441" target="_blank" title="企业名称：广东欧珀电子工业有限公司
法定代表人：金乐亲
标识状态：已激活 粤工商备E191512001248
电子标识有效期：2015-12-14～2020-12-16" class="footer-identification"></a>
    </div>
  </div>
</footer>
    
    <div class='navi-scroll'>
  <div class="navi-scroll-content">
    <a href="javascript:;" class="scroll-top-btn"><span>回到顶部</span><i></i></a>
    <a href="https://www.wenjuan.com/s/2AzYrm/" target="_blank" class="survey-btn survey-btn-normal"><span>意见反馈</span><i></i></a>
    <a href="https://www.wenjuan.com/s/2AzYrm/" class="survey-btn survey-btn-mobile"><span>意见反馈m</span><i></i></a>
  </div>
</div>
    
    <div class="purchase-advisory">
        <a href="http://oim.oppo.com/oim/chatClient/chatbox.jsp?companyID=8092&configID=890&enterurl=http%3A%2F%2Foim%2Emyoppo%2Ecom%2Foim%2Fpreview%2Ejsp&pagereferrer=http%3A%2F%2Foim%2Emyoppo%2Ecom%2Foim%2FembedScript%2Ejsp%3Ft%3D1517&k=1" target="_blank" id="advisory">购机咨询</a>
    </div>
{{csrf_field()}}
<script type="text/javascript" src="/js/jquery-1.8.3.js"></script>
<script type="text/javascript">
    reckon(); //显示购物车数量
    qingkong();
    var token=$("input[name='_token']").val();
    $('#yd').click(function(){ //清空购物车
      var result = confirm("您确定要删除该商品吗");
      if(result==true){
        $.ajax({
          url:'/shop/clear',
          type:'post',
          data:{'_token':token,'username':'admin'},
          dataType:'text',
          success:function(mes){
            if(mes=='yes'){
              $('div[info="kong1"]').remove();
              change();
              reckon();
              qingkong();
            }
          }
        });
      }
      return false;
    });

    $('#del').live('click',function(){ //删除单独一个物品
      var result = confirm("您确定要删除该商品吗");
      if (result == true){
        var id=$(this).prev().prev().find('input').val();//获取当前商品的id
        var del=$(this);
        $.ajax({
          url:'/shop/del',
          type:'post',
          data:{'_token':token,'id':id},
          dataType:'text',
          success:function(mes){
            if(mes=='yes'){
              del.parent().parent().remove();
              change();
              reckon();
            }
          }
        });
      } 
    });

    $('.quanxuan1').live('click',function(){ //每个多选框 
      var num=0;
      var total=0;
      if($(this).attr('info')==1){ //1代表不选中 0代表选中
        $(this).attr('info',0);
      }else{
        $(this).attr('info',1);
      }
       $('input[info="0"]').each(function(){ //计算选中物品的总数
          var a=$(this).parent().parent().next().find('.cart-counter-box').find('div').find('input').val();//每个选中物品的数量
          var price=$(this).parent().parent().next().find('div').find('span').html();//每个物品的单价
          total+=parseInt(a)*parseInt(price);
          num+=parseInt(a);
      });
       $('#count').html(num);//将选中的物品的个数写到'商品数量'标签里
       $('#price').html('￥'+total); //将总价写到'总计'里
       getnum(); //设置所有物品都选中后 '全选'变'全不选'的样式
    });

    $('#quanxuan1').click(function(){
      var num1=0;
      var total1=0;
      if($('.space-ml-10').html()=='全选'){
        $('.quanxuan1').attr('checked',true);
        $('.space-ml-10').html('全不选');
        $('.quanxuan1').attr('info',0);
        $('.cart-product-quantity-b5c161c6639cbf6eb3a51469ece3aa05').each(function(){//获取所有选中物品的数量input框
          num1+=parseInt($(this).val());
          var price1=parseInt($(this).parent().parent().next().find('span').html());//相对节点找单件
          total1+=parseInt($(this).val())*price1;
        });
        $('#count').html(num1);
        $('#price').html('￥'+total1);
      }else{
        $('.quanxuan1').attr('checked',false);
        $('.space-ml-10').html('全选');
        $('.quanxuan1').attr('info',1);
        $('#count').html('');
        $('#price').html('');        
      }
    });

    $('#jia').live('click',function(){
      var num3=0;
      var total=0;
      var id=$(this).parent().prev().val();//获取当前商品的id
      var num=parseInt($(this).prev().val())+1; //当前购买数量+1
      $(this).prev().val(num);
      if($('input[info="0"]').attr('info')==0){ //查看当前物品是否选中 选中的把数量和价格写到'商品数量'和'总计'里
          $('input[info="0"]').each(function(){
            var a=$(this).parent().parent().next().find('.cart-counter-box').find('div').find('input').val();
            var price=$(this).parent().parent().next().find('div').find('span').html();
            total+=parseInt(a)*parseInt(price);
            num3+=parseInt(a);
          });
        $('#count').html(num3);
        $('#price').html('￥'+total);
      }
      myajax(num,id); //将改变后的数据在数据库更新
      reckon();
    });

    $('#jian').live('click',function(){
      var num3=0;
      var total=0;
      if($(this).next().val()==1){
        return;
      }
      var id=$(this).parent().prev().val();
      var num=parseInt($(this).next().val())-1;
      $(this).next().val(num);
      if($('input[info="0"]').attr('info')==0){
          $('input[info="0"]').each(function(){
            var a=$(this).parent().parent().next().find('.cart-counter-box').find('div').find('input').val();
            var price=$(this).parent().parent().next().find('div').find('span').html();
            total+=parseInt(a)*parseInt(price);
            num3+=parseInt(a);
          });
        $('#count').html(num3);
        $('#price').html('￥'+total);
      }
      myajax(num,id);
      reckon();
    });

    //填写订单
    $('#shipping_btn').click(function(){
      if($('input[info="0"]').length<=0){
        alert('请选中要购买的商品');
        return;
      }
      var arr=[];
      $('input[info="0"]').each(function(i){
        arr[i]=$(this).parent().parent().next('div').find('div:eq(1)').find('input').val();
      });
      $.ajax({
        url:'/shop/txie',
        type:'post',
        data:{'_token':token,'arr':arr},
        dataType:'text',
        success:function(mes){
          if(mes=='yes'){
            $('.quanxuan1').attr('checked',false);
            $('#quanxuan1').attr('checked',false);
            location.href='/dingdan/address';
          }
        }
      });
    })

    function qingkong(){
      if($('div[info="kong1"]').length>0){ //显示和隐藏购物车有木有商品的样
        $('#kong').hide();
      }else{
        $('#kong').show();
      } 
    }

    function myajax(num,id){ //更新购买数量的方法
      $.ajax({
        url:'/shop/request',
        type:'post',
        data:{'_token':token,'num':num,'id':id},
        dataType:'json',
        
        success:function(mes){

        }
      });
    }

    function reckon(){  //显示购物车上物品数量的方法
      var num6=0;
        $('.cart-product-quantity-b5c161c6639cbf6eb3a51469ece3aa05').each(function(){ //获取所有选中物品的数量input框
          num6+=parseInt($(this).val());
        }); 
        $('#shopping-count').html(num6);
    }

    function getnum(){ //全选和全不选的改变样式
      if($('.quanxuan1').length==$('input[info="0"]').length){
        $('#quanxuan1').attr('checked',true);
        $('.space-ml-10').html('全不选');
      }else{
        $('#quanxuan1').attr('checked',false);
        $('.space-ml-10').html('全选');       
      }
    }

    function change(){ //删除物品后重新统计数量和总价
      var num4=0;
      var total4=0;
      $('input[info="0"]').each(function(){
        var b=parseInt($(this).parent().parent().next().find('.cart-counter-box').find('div').find('input').val());
        var price=parseInt($(this).parent().parent().next().find('div').find('span').html());
        num4+=b;
        total4+=b*price;
      });
        $('#count').html(num4);
        $('#price').html('￥'+total4);
    }
</script>
</body>
</html>
