jQuery(document).ready(function(){$(function(){$("#password").togglePassword({el:"#togglePassword"})});$("#register_btn").click(function(){var n;flag1=e();flag2=j();flag3=d();n=flag1&&flag2&&flag3;if($("#registerstyle").val()==="1"){flag4=c();n=flag1&&flag2&&flag3&&flag4;if(n){$("#registerForm").submit()}}else{if($("#registerstyle").val()==="2"){if(n){$("#registerForm").submit()}}}});$("#mobile,#password,#mobilecheck,#email,#validatecode").keypress(function(n){if(n.which==13){$("#register_btn").trigger("click")}});$("#password").focus(function(){$("#passwordmsg").html("6-16个字符，可用数字、字母、下划线");$("#passwordmsg").css({color:"#949494"});$("#safe").show();$("#pwdLevel_1").attr("class","safered");$("#password").keyup();$("#true3").hide()}).blur(function(n){j()});$("#password").keyup(function(){var n=$(this);if(!n.val()){l();return}if(n.val().length<6){k();return}var o=m(n);if(o<1){l();return}if(o>0&&o<2){k()}else{if(o>=2&&o<4){a()}else{if(o>=4){i()}}}});function l(){$("#pwdLevel_1,#pwdLevel_2,#pwdLevel_3").removeClass()}function k(){$("#pwdLevel_1").attr("class","safered");$("#pwdLevel_2").removeClass();$("#pwdLevel_3").removeClass()}function a(){$("#pwdLevel_1").attr("class","safered");$("#pwdLevel_2").attr("class","safered");$("#pwdLevel_3").removeClass()}function i(){$("#pwdLevel_1").attr("class","safered");$("#pwdLevel_2").attr("class","safered");$("#pwdLevel_3").attr("class","safered")}function m(v){var n,p,q,o,u,r;var t=$(v).val();var s=t.length;var u=/.{16}/g;if(s==0){return 1}if(s>16){$(v).val(t.match(u)[0])}u=/.*[\u4e00-\u9fa5]+.*$/;if(u.test(t)){return -1}u=/\d/;var n=u.test(t);u=/[a-z]/;var p=u.test(t);u=/[A-Z]/;var q=u.test(t);var o=g(v);var r=n+p+q+o;if(s<6){return 1}if(s>=6&&s<=8){if(r==1){return 1}if(r==2||r==3){return 2}if(r==4){return 3}}if(s>8&&s<=11){if(r==1){return 2}if(r==2){return 3}if(r==3){return 4}if(r==4){return 5}}if(s>11){if(r==1){return 3}if(r==2){return 4}if(r>2){return 5}}}function g(o){var n=/./g;var r=$(o).val();var q=r.match(n);for(var p=0;p<q.length;p++){n=/\d/;maths_01=n.test(q[p]);n=/[a-z]/;smalls_01=n.test(q[p]);n=/[A-Z]/;bigs_01=n.test(q[p]);if(!maths_01&&!smalls_01&&!bigs_01){return true}}return false}$("#email,#mobile").blur(function(){e()});$("#mobile").keyup(function(n){var o=$("#mobilesave").val();if(o!=""&&$("#validateCodeDiv_1").css("display")=="none"){if($(this).val()!=o){$("#validateCodeDiv_1").stop(true,true);$("#validateCodeDiv_2").stop(true,true);$(".validatecodeout img").hide();$("#validateCodeDiv_1").css("left","380px");$("#validateCodeDiv_1").show();$("#getcode_img").attr("src","/Verify/getcode/"+Math.random());$("#validateCodeDiv_2").animate({left:"-380px"},400);$("#validateCodeDiv_1").animate({left:0},400,function(){$("#validateCodeDiv_2").hide()});$("#validatemsg").html("").css("color","#dc5751");clearTimeout(h);f=60;$("#mcbtn").css({background:"#fff"});$("#mcbtn").attr("disabled",false);$("#mcbtn").val("免费获取短信");$("#validatecode").val("")}}});$("#password").blur(function(){j()});$("#mobilecheck").blur(function(){c()});$("#validatecode").blur(function(n){if($("#validateCodeDiv_1").css("display")=="block"){d()}});$("#getcode_img").click(function(n){$(this).attr("src","/Verify/getcode/"+Math.random())});$("#getcode_click").click(function(n){$("#getcode_img").attr("src","/Verify/getcode/"+Math.random())});$("#validatecode").keyup(function(o){var p=$(this);var n={pcode:p.val()};if(p.val().length===4){jQuery.ajax({url:"/ajax/code/check_code",type:"GET",dataType:"json",data:n,success:function(q){if(q.code===1){p.parent().removeClass("redborder");$("#validatemsg").html("");$(".tap").hide();$(".validatecodeout img.icon1").show();if($("#registerstyle").val()==="1"){$("#validateCodeDiv_1").stop(true,true);$("#validateCodeDiv_2").stop(true,true);$("#validateCodeDiv_2").css("left","380px");$("#validateCodeDiv_2").show();$("#validateCodeDiv_1").animate({left:"-380px"},400);$("#validateCodeDiv_2").show();$("#validateCodeDiv_2").animate({left:0},400,function(){$("#validateCodeDiv_1").hide()});$("#mobilecheck").parent().removeClass("redborder");var r=$("#mobile").val();$("#mobilesave").val(r);clearTimeout(h);f=60;$("#mcbtn").css({background:"#fff"});$("#mcbtn").attr("disabled",false);$("#mcbtn").val("获取验证码");$("#mobilecheck").val("");$(".mobilecheckout img.icon1").hide();setTimeout(function(){$("#mcbtn").trigger("click");$("#mobilecheck").focus()},410)}}else{p.parent().addClass("redborder");$(".validatecodeout img.icon1").hide();$("#getcode_img").attr("src","/Verify/getcode/"+Math.random());$("#validatemsg").text("请输入正确验证码")}}})}});$("body").delegate("#mcbtn","click",function(n){e();var o=$(this);if($("#registerstyle").val()==="1"&&o.val()==="获取验证码"){$.ajax({url:"/ajax/tel/nologin_send_verify_code",cache:false,type:"post",dataType:"json",async:false,data:{tel:$("#mobile").val(),key_safe:$("#key_safe").val(),pcode:$("#validatecode").val()},success:function(p){if(p.code===1){$("#mobilecheck").focus();$("#validatemsg").html("短信已经发送到您的手机，请注意查收").css("color","#dc5751");b(o)}else{$("#validateCodeDiv_1").stop(true,true);$("#validateCodeDiv_2").stop(true,true);$("#validateCodeDiv_1").css("left","380px");$("#validateCodeDiv_1").show();$("#getcode_img").attr("src","/Verify/getcode/"+Math.random());$("#validateCodeDiv_2").animate({left:"-380px"},400);$("#validateCodeDiv_1").animate({left:0},400,function(){$("#validateCodeDiv_2").hide();$("#validatecode").focus();$("#validatecode").val("");$(".validatecodeout img").hide();$("#validatemsg").html(p.msg).css("color","#dc5751")})}}})}else{if($("#registerstyle").val()==="1"&&o.val()==="重新发送验证码"){$("#validateCodeDiv_1").stop(true,true);$("#validateCodeDiv_2").stop(true,true);$("#validateCodeDiv_1").css("left","380px");$("#validateCodeDiv_1").show();$("#getcode_img").attr("src","/Verify/getcode/"+Math.random());$("#validateCodeDiv_2").animate({left:"-380px"},400);$("#validateCodeDiv_1").animate({left:0},400,function(){o.val("获取验证码");$("#validateCodeDiv_2").hide();$("#validatecode").focus();$("#validatecode").val("");$(".validatecodeout img").hide();$("#validatemsg").html(data.msg).css("color","#dc5751")})}}});$("#mctext").focus(function(){$(".mcback").addClass("mcback_focus")}).blur(function(){$(".mcback").removeClass("mcback_focus")});$("#mobile").keypress(function(n){if($.trim($(this).val()).length>=0){$(".deletemobile").show()}else{$(".deletemobile").hide()}});$("#mobile").focus(function(n){if($.trim($(this).val()).length>=1){$(".deletemobile").show()}else{$(".deletemobile").hide()}});$("#mobile").blur(function(n){if($.trim($(this).val()).length>=1){$(".deletemobile").show()}else{$(".deletemobile").hide()}});$("body").delegate(".deletemobile","click",function(n){n.preventDefault();$("#mobile").val("");$(this).hide()});$("#cutemail").click(function(n){$("#mobilediv").stop(true,true);$("#emaildiv").stop(true,true);$("#registerstyle").val(2);$("#emaildiv").show();$("#emaildiv").css("left","410px");$("#mobilediv").animate({left:"-410px"},400);$("#emaildiv").animate({left:0},400,function(){$("#mobilediv").hide()});$("#emailormobilemsg").html("");$("#validatemsg").html("");$("#passwordmsg").html("");$(".login_txt").removeClass("redborder");$("#validatecode").val("");$("#getcode_img").attr("src","/Verify/getcode/"+Math.random());$(".validatecodeout img").hide();$(".mcback").removeClass("redborder")});$("#cutmobile").click(function(n){$("#mobilediv").stop(true,true);$("#emaildiv").stop(true,true);$("#registerstyle").val(1);$("#mobilediv").show();$("#mobilediv").css("left","410px");$("#emaildiv").animate({left:"-410px"},400);$("#mobilediv").animate({left:0},400,function(){$("#emaildiv").hide()});$("#emailormobilemsg").html("");$("#validatemsg").html("");$("#passwordmsg").html("");$(".login_txt").removeClass("redborder");$("#validatecode").val("");$("#getcode_img").attr("src","/Verify/getcode/"+Math.random());$(".validatecodeout img").hide();$(".mcback").removeClass("redborder")});var f=60;var h;function b(n){if(f===0){$("#mcbtn").css({background:"#fff"});n.attr("disabled",false);n.value="重新发送验证码";f=60}else{n.attr("disabled",true);n.value=f+"秒后重新获取";$("#mcbtn").css({background:"#d0d0d0"});f--;h=setTimeout(function(){b(n);$("#mcbtn").val(n.value)},1000)}}function e(){var n=false;if($("#registerstyle").val()==="2"){if(/^[a-zA-Z0-9_+.-]+\@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,4}$/.test($("#email").val())){$.ajax({url:"/ajax/email/emailifexist",async:false,cache:false,type:"post",dataType:"json",data:{email:$("#email").val()},success:function(o){if(!o){$("#email").parent().addClass("redborder");$("#emailormobilemsg").html("此邮箱已使用");$(".tap").show();$("#true2").hide()}else{$("#email").parent().removeClass("redborder");$("#emailormobilemsg").html("");$(".tap").hide();$("#true2").show();n=true}}})}else{if(!$("#email").val()){$("#email").parent().addClass("redborder");$("#emailormobilemsg").html("请输入邮箱！");$(".tap").show();$("#true2").hide()}else{$("#email").parent().addClass("redborder");$("#emailormobilemsg").html("请填写正确的邮箱地址");$(".tap").show();$("#true2").hide()}}}else{if($("#registerstyle").val()==="1"){if($("#mobile").val().match(/^13[0-9]{9}$|14[0-9]{9}$|15[0-9]{9}$|17[0-9]{9}$|18[0-9]{9}$/)){$.ajax({url:"/ajax/tel/check_bind",cache:false,type:"post",dataType:"json",async:false,data:{tel:$("#mobile").val()},success:function(o){if(o===1){$("#mobile").parent().addClass("redborder");$("#emailormobilemsg").html("此手机号已使用");$(".tap").show();$("#true1").hide()}else{if(o===-1){$("#mobile").parent().addClass("redborder");$("#emailormobilemsg").html("请输入正确的11位手机号码");$(".tap").show();$("#true1").hide()}else{if(o===-2){$("#mobile").parent().removeClass("redborder");$("#emailormobilemsg").html("");$(".tap").hide();$("#true1").show();n=true}}}}})}else{if(!$("#mobile").val()){$("#mobile").parent().addClass("redborder");$("#emailormobilemsg").html("请输入手机号码！");$(".tap").show();$("#true1").hide()}else{$("#mobile").parent().addClass("redborder");$("#emailormobilemsg").html("请输入正确的11位手机号码");$(".tap").show();$("#true1").hide()}}}}return n}function c(){var n=false;var o=$("#mobilecheck").val();if(o!=""){$.ajax({url:"/ajax/tel/nologin_check_verify_code",cache:false,type:"post",async:false,dataType:"json",data:{tel:$("#mobile").val(),code:$("#mobilecheck").val(),key_safe:$("#key_safe").val()},success:function(p){if(p===1){$("#mobilecheck").parent().removeClass("redborder");$("#validatemsg").html("");$(".mobilecheckout img.icon1").show();n=true}else{if(p===-2){$("#mobilecheck").parent().addClass("redborder");$("#validatemsg").html("验证码已超时，请重新发送").css("color","#dc5751");$("#mcbtn").attr("disabled",false);$(".mobilecheckout img.icon1").hide()}else{if(p===-3){$("#mobilecheck").parent().addClass("redborder");$("#validatemsg").html("验证码输入错误次数过多，请重新获取验证码").css("color","#dc5751");$(".mobilecheckout img.icon1").hide()}else{if($("#mobilecheck").val()!=""){$("#mobilecheck").parent().addClass("redborder");$("#validatemsg").html("验证码不正确，请输入正确验证码").css("color","#dc5751");$(".mobilecheckout img.icon1").hide()}}}}}})}else{if($("#validateCodeDiv_1").css("display")=="none"){$("#mobilecheck").parent().addClass("redborder");$("#validatemsg").html("请输入验证码！").css("color","#dc5751")}}return n}function j(){var n=false;if($("#password").val()){if(!/[a-zA-Z0-9_]$/.test($("#password").val())){$("#password").parent().addClass("redborder");$("#passwordmsg").html("密码格式不正确").css("color","#dc5751");$("#true3").hide()}else{if($("#password").val().length<6){$("#password").parent().addClass("redborder");$("#passwordmsg").html("密码最少6位").css("color","#dc5751");$("#true3").hide()}else{$("#password").parent().removeClass("redborder");$("#passwordmsg").html("");$("#safe").hide();$("#true3").show();n=true}}}else{$("#password").parent().addClass("redborder");$("#passwordmsg").html("请输入密码！").css("color","#dc5751");$("#true3").hide()}return n}function d(){var n=false;var p=$("#validatecode");var o={pcode:p.val()};if(p.val()!=""){$.ajax({url:"/ajax/code/check_code",type:"GET",dataType:"json",data:o,cache:false,async:false,success:function(q){if(q.code===1){p.parent().removeClass("redborder");$("#validatemsg").html("");$(".validatecodeout img.icon1").show();n=true}else{p.parent().addClass("redborder");$(".validatecodeout img.icon1").hide();$("#validatemsg").text("请输入正确验证码");$("#getcode_img").attr("src","/Verify/getcode/"+Math.random())}}})}else{p.parent().addClass("redborder");$(".validatecodeout img.icon1").hide();$("#validatemsg").text("请输入验证码！").css("color","#dc5751")}return n}});